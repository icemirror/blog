# åŸºæœ¬ç¤ºä¾‹ã€ç»§æ‰¿

### è¯¾ç¨‹å†…å®¹

- åŸºæœ¬ç¤ºä¾‹
- ç»§æ‰¿
- å…¬å…±ã€ç§æœ‰ã€å—ä¿æŠ¤çš„ä¿®é¥°ç¬¦
- readonlyä¿®é¥°ç¬¦
- å­˜å–å™¨
- é™æ€å±æ€§
- æŠ½è±¡ç±»
- é«˜çº§ç”¨æ³•

#### åŸºç¡€ç¤ºä¾‹

```ts
class Greeter {
  greeting: string;
  constructor(message: string) {
    this.greeting = message;
  }
  greet () {
    return `hello, ${this.greeting}`;
  }
}

const greeter = new Greeter('world');
greeter.greet();
```

å…è®¸ä½¿ç”¨ç»§æ‰¿çš„æ–¹å¼, æ¥æ‰©å±•ç°æœ‰çš„ç±».

```ts
class Animal {
  move (distance: number = 0) {
    console.log(`animal moved ${distance}m`)
  }
}

class Dog extends Animal {
  bark () {
    console.log('woof! woof!');
  }
}

const dog = new Dog()
dog.bark() // è‡ªèº«çš„æ–¹æ³•
dog.move(10) // ç»§æ‰¿çš„æ–¹æ³•
```

ä»¥ä¸Šä¾‹å­ä¸­, Animalæ˜¯åŸºç¡€ç±», Dogç»§æ‰¿äºAnimalä¸ºæ´¾ç”Ÿç±». é€šå¸¸åŸºç¡€ç±»æ˜¯è¶…ç±»,æ´¾ç”Ÿç±»ä¸ºå­ç±».


```ts
class Animal {
  name: string
  constructor(name: string) {
    this.name = name
  }
  move (distance: number = 0) {
    console.log(`${this.name} moved ${distance}m`)
  }
}

class Snake extends Animal {
  constructor (name: string) {
    super(name)
  }
  move(distance: number = 5) {
    console.log('slithering...')
    super.move(distance) // è°ƒç”¨åŸºç±»çš„æ–¹æ³•
  }
}

class Horse extends Animal {
  constructor (name: string) {
    super(name)
  }
  // æ´¾ç”Ÿç±»ã€é‡å†™äº†åŸºç±»çš„moveæ–¹æ³•
  move(distance: number = 50) {
    console.log('galloping...') // è‡ªå®šä¹‰çš„å†…å®¹
    super.move(distance)
  }
}
const sam = new Snake('sammy')
const tom: Animal = new Horse('tommy')

sam.move()
tom.move(45)
```

#### ä¿®é¥°ç¬¦

- public

åœ¨typescriptä¸­, ä¸€ä¸ªç±»çš„æˆå‘˜, é»˜è®¤ä¸º ```public```. åœ¨ç±»å’Œå­ç±»ä¸­éƒ½å…è®¸è®¿é—®.

```ts
class Animal {
  name: string;
}
// ç­‰ä»·äº

class Animal {
  public name: string;
}
```
- private

ä¸¤ä¸ªç±»éƒ½åŒ…å«privateæˆå‘˜, åªæœ‰å½“ä¸¤ä¸ªç±»çš„privateæˆå‘˜æ¥è‡ªåŒä¸€å¤„å£°æ˜æ—¶, æ‰èƒ½è¢«è§†ä¸ºç±»å‹å…¼å®¹çš„, å¦åˆ™æ— æ³•è®¿é—®åˆ°ç§æœ‰æˆå‘˜. è¿™ä¸ªè§„åˆ™å¯¹protectedç±»å‹ä¹Ÿé€‚ç”¨.

```ts
class Animal {
  private name: string = '';
  public constructor(name: string) {
    this.name = name;
  }
}

new Animal('cat').name();
// Property 'name' is private and only accessible within class 'Animal'.
```

```ts
class Animal {
  private name: string = '';
  constructor(name: string) {
    this.name = name;
  }
}

class Rhino extends Animal {
  constructor() {
    super('Rhino');
  }
}

class Employee {
  private name: string = '';
  constructor(name: string) {
    this.name = name;
  }
}

let animal = new Animal('goat');
const rhino = new Rhino();
const employee = new Employee('bob');

animal = rhino;
animal = employee; // error

// Type 'Employee' is not assignable to type 'Animal'.
```
ä»¥ä¸Šä¾‹å­ä¸­, Employeeç±»çœ‹èµ·æ¥è·ŸAnimalä¸€æ¨¡ä¸€æ ·çš„å£°æ˜. ä½†æ˜¯ä»–ä»¬éƒ½å­˜åœ¨ç§æœ‰æˆå‘˜ private name, å¹¶ä¸”éƒ½æ˜¯å„è‡ªå£°æ˜çš„,å¹¶éæ¥è‡ªåŒä¸€å¤„, å› æ­¤è¢«è§†ä¸ºä¸å¯å…¼å®¹ç±»å‹, æ— æ³•èµ‹å€¼.

- protected

å—ä¿æŠ¤çš„æˆå‘˜.

```ts
class Person {
  protected name: string;
  constructor(name: string) {
    this.name = name;
  }
}
class Employee extends Person {
  private department: string;
  constructor(name: string, department: string) {
    super(name);
    this.department = department;
  }
  getElevatorPitch () {
    return `hello, my name is ${this.name} and i work in ${this.department}`;
  }
}

let howard = new Employee('howard', 'sales');
console.log(howard.getElevatorPitch());
console.log(howard.name); // error
// Property 'name' is protected and only accessible within class 'Person' and its subclasses.
```
protected nameæ˜¯å—ä¿æŠ¤æˆå‘˜, åªèƒ½åœ¨Personç±»å†…éƒ¨æˆ–å­ç±»ä¸­ä½¿ç”¨.

protectedä¹Ÿå¯ä»¥ç”¨äºä¿æŠ¤æ„é€ å‡½æ•°, é˜²æ­¢å¤–ç•Œä½¿ç”¨newå®ä¾‹åŒ–.

```ts
class Person {
  protected name: string;
  protected constructor(name: string) {
    this.name = name;
  }
}
let tommy = new Person('tommy'); // error
// Constructor of class 'Person' is protected and only accessible within the class declaration.
```

- readonly

æœ‰æ—¶å€™, æˆ‘ä»¬å¸Œæœ›æœ‰äº›å±æ€§, èƒ½è®¿é—®ä½†æ˜¯ä¸å¯ä¿®æ”¹, è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨readonly.

```ts
class Person {
  public readonly name: string = '';
  constructor(name: string) {
    this.name = name;
  }
}

let tim = new Person('lily');
console.log(tim.name); // ğŸ‘Œ å¯è¯»
tim.name = 'rose'; // âŒ ä¸å¯å†™
// Cannot assign to 'name' because it is a read-only property.
```
- å‚æ•°å±æ€§

å‚æ•°å±æ€§å°±æ˜¯ç»™æ„é€ å‡½æ•°constructorçš„å‚æ•°æ·»åŠ è®¿é—®é™å®šç¬¦æ¥å£°æ˜å‚æ•°.

```ts
class Person {
  constructor(readonly name: string) {
    this.name = name;
  }
}

class Person2 {
  constructor(private name: string) {
    this.name = name;
  }
}

class Person3 {
  constructor(public name: string) {
    this.name = name;
  }
}

// ....
```
è™½ç„¶å‚æ•°å±æ€§å¯ä»¥ç®€åŒ–ä¸€äº›ä¹¦å†™. ä½†æ˜¯è¿˜æ˜¯æ¨èç”¨å±æ€§æ–¹å¼æ¥å£°æ˜, å¯è¯»æ€§æ›´ä½³.

```ts
// ç›´è§‚, å¯è¯»æ€§æ›´å¼º (æ¨è)
class Person {
  public readonly name: string = '';
  constructor(name: string) {
    this.name = name;
  }
}
```
#### å…¶ä»–æŠ€å·§

- å­˜å–å™¨

æ‰€è°“å­˜å–å™¨, å°±æ˜¯ä½¿ç”¨getterså’Œsetterså¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ä¸æ”¹å†™.

```ts
const password = 'secret';

class Employee {
  private _fullName: string;
  get fullName(): string {
    return this._fullName;
  }
  set fullName(newName: string) {
    if (password && password === 'secret') {
      this._fullName = newName;
    } else {
      console.log('Error: unauthorized update of employee!');
    }
  }
}

const employee = new Employee();
employee.fullName = 'Bob';
if (employee.fullName) {
  console.log(employee.fullName)
}
```

- é™æ€å±æ€§

```ts
class Grid {
  static origin = {
    x: 0,
    y: 0
  }
  scale: number;
  constructor(scale: number) {
    this.scale = scale;
  }
  calculateDistanceFromOrigin(point: { x: number, y: number }) {
    let xDist = point.x - Grid.origin.x
    let yDist = point.y - Grid.origin.y // å¯ä»¥é€šè¿‡ç±»è®¿é—®é™æ€å±æ€§
    return Math.sqrt(xDist * xDist + yDist * yDist);
  }
}

let grid1 = new Grid(1.0);
let grid2 = new Grid(2.0);

grid1.calculateDistanceFromOrigin({
  x: 3,
  y: 4
}); // 5
grid2.calculateDistanceFromOrigin({
  x: 3,
  y: 4
}); // 10
```

- æŠ½è±¡ç±»

æŠ½è±¡ç±»é€šå¸¸ä½œä¸ºåŸºç±»ä½¿ç”¨, ä¸€èˆ¬ä¸èƒ½è¢«ç›´æ¥è¢«å®ä¾‹åŒ–, éœ€è¦åœ¨æ´¾ç”Ÿç±»å»å®ç°. é€šè¿‡abstractå…³é”®å­—æ¥è¡¨ç¤ºç±»ä¸ºæŠ½è±¡ç±». æ–¹æ³•å‰åŒ…å«abstractå…³é”®å­—, å°±è¢«è§†ä¸ºæŠ½è±¡æ–¹æ³•.

```ts
abstract class Department {
  public name: string;
  constructor(name: string) {
    this.name = name;
  }
  public printName(): void {
    console.log('Department name is ' + this.name);
  }
  public abstract printMeeting(): void;
}

class AccountingDepartment extends Department {
  constructor() {
    super('Accounting ad Auditing');
  }
  printMeeting(): void {
    console.log('The accounting Department meets each Monday at 10am.');
  }
  generateReports(): void {
    console.log('Generating Reports...');
  }
}

let department: Department;
department = new Department();
// Cannot create an instance of an abstract class
department = new AccountingDepartment();
department.printName();
department.printMeeting();
department.generateReports();
// Property 'generateReports' does not exist on type 'Department'.
```
ä»ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹å‡º, æŠ½è±¡ç±»ä¸å…è®¸ç›´æ¥è¢«å®ä¾‹åŒ–. åªèƒ½é€šè¿‡å®ä¾‹åŒ–æŠ½è±¡ç±»çš„æ´¾ç”Ÿç±». ç±»å‹å®šä¹‰ä¸ºæŠ½è±¡ç±»ç±»å‹æ—¶, åœ¨è°ƒç”¨æ–¹æ³•æ—¶, æ— æ³•è°ƒç”¨æŠ½è±¡ç±»ä¸­æœªå®šä¹‰æˆ–æ— æ³•è®¿é—®çš„æ–¹æ³•, æ— æ³•è°ƒç”¨æ´¾ç”Ÿç±»ä¸­çš„æ–¹æ³•, ä¼šè¢«è§†ä¸ºä¸å­˜åœ¨.

```ts
let department: AccountingDepartment;
department = new AccountingDepartment();
department.generateReports(); // ğŸ‘Œ
```

#### é«˜çº§æŠ€å·§

```ts
class Greeter {
  private static standardGreeting = 'Hello, there';
  public greeting: string = '';
  // messageå¯é€‰, åˆ™greetingå¯èƒ½æ˜¯undefined
  public contructor(message?: string) {
    this.greeting = message || ''; // è¿”å›å¿…éœ€æ˜¯å­—ç¬¦ä¸²ç±»å‹
  }
  public greet(): string {
    if (this.greeting) {
      // è¿”å›ä¼ å…¥çš„å€¼
      return `Hello, ${this.greeting}`;
    } else {
      // è¿”å›é™æ€å†…å®¹
      return Greeter.standardGreeting;
    }
  }
}
let greeter: Greeter
greeter = new Greeter() // messageå¯é€‰å‚æ•°
console.log(greeter.greet()) // Hello, there

let greeterMaker: typeof Greeter = Greeter // Greeterç±»çš„ç±»å‹, å¹¶å°†Greeterèµ‹å€¼ç»™greeterMaker
greeterMaker.standardGreeting = 'Hey there.' // ä¿®æ”¹é™æ€å±æ€§

let greeter2: Greeter = new greeterMaker()
console.log(greeter2.greet()) // Hey there.
// æ–°çš„æ„é€ å™¨, å¹¶ä¿®æ”¹äº†é™æ€å±æ€§
```

ä¹Ÿå¯ä»¥å°†ç±»å½“ä½œæ¥å£æ¥ä½¿ç”¨

```ts
class Point {
  x: number
  y: number
}
interface Point3D extends Point {
  // å¯ä»¥å…±äº«xã€yç­‰æ•°æ®
  z: number
}

let point3d: Point3D = {
  x: 1,
  y: 2,
  z: 3
}
```